{"ast":null,"code":"import _classCallCheck from\"/Users/joey/Documents/Codes/CMPS_450/Senior_Project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/joey/Documents/Codes/CMPS_450/Senior_Project/node_modules/@babel/runtime/helpers/esm/createClass\";/**\n * @file ctc_harriman.js\n * @author Joey Damico\n * @date September 25, 2019\n * @summary CTC Controller Class for the CP Harriman Interlocking\n */ // Color Constants For Drawing Routes\nvar Empty='#999999';var Lined='#75fa4c';var Occupy='#eb3323';/**\n * Class is the Backend for the CP Harriman Interlocking This class is what controlls the CP Harriman Interlocking, \n * it is sort of like a backen, but is the controller, this is what makes all the train movements possible, \n * and the ReactJS Component class gets information from this class to display the correct status of \n * the interlocking on the screen\n * \n * MEMBER VARIABLES\n * @member sw_21 -> Bool if Switch #21 is Reveresed or Not\n * @member sw_32 -> Bool if Switch #32 is Reveresed or Not\n * \n * @member sig_1w -> Bool if Signal #1w is Lined or Not\n * @member sig_1e -> Bool if Signal #1e is Lined or Not\n * @member sig_2e -> Bool if Signal #2e is Lined or Not\n * @member sig_3e -> Bool if Signal #3e is Lined or Not\n * \n * @member route_w_trk_1 = The west bound route for track #1\n * @member route_e_trk_1 = The east bound route for track #1\n * @member route_e_trk_2 = The east bound route for track #2\n * @member route_e_trk_3 = The east bound route for track #3\n * \n * @member time_occupied = The time the track was occupied, used to know when to clear the route\n * @member int_occupied = Bool if the track is occupied or not\n */var CTC_Harriman=/*#__PURE__*/function(){/**\n     * constructor()\n     * @summary The constructor for the CTC_Harriman class\n     * \n     * @description This will initialize all the member variables when the program is started\n     */function CTC_Harriman(){_classCallCheck(this,CTC_Harriman);// Bools for the switches\nthis.sw_21=false;this.sw_32=false;// Bools for the signals\nthis.sig_1w=false;this.sig_1e=false;this.sig_2e=false;this.sig_3e=false;// Track routes\nthis.route_w_trk_1=null;this.route_e_trk_1=null;this.route_e_trk_2=null;this.route_e_trk_3=null;// Used for routing and occupying the tracks \nthis.int_occupied=false;this.time_occupied=null;}// ---- END constructor() ----\n/**\n     * get_train_route()\n     * @summary Returns the route for the train at a given track\n     * \n     * @param direction, The direction the train is moving\n     * @param track, The Track number of the train \n     */_createClass(CTC_Harriman,[{key:\"get_train_route\",value:function get_train_route(direction,track){if(direction===\"WEST\"){return this.route_w_trk_1;}else{if(track===\"1\"){return this.route_e_trk_1;}else if(track===\"2\"){return this.route_e_trk_2;}else{return this.route_e_trk_3;}}}// ---- END get_train_route() ----\n/**\n     * click_sig_2w()\n     * @summary the function that is called when clicking the signal, creates a route\n     * \n     * @description When the function is called it will determine if a route can be created, \n     * and if so what the route is and sets it based off of the switch status\n     * \n     * @param next_block_1, The next block on Track #1\n     * @param next_block_2, The next block on Track #2\n     * @param next_block_3, The next block on Track #3\n     */},{key:\"click_sig_1w\",value:function click_sig_1w(next_block_1,next_block_2,next_block_3){if(!this.sw_32&&!this.sw_21){if(this.sig_1w){this.route_w_trk_1=null;this.sig_1w=false;}else{if(next_block_1===Occupy||next_block_1===Lined){alert(\"Cannot Line Route Because Conflict With Next Block\");return;}this.route_w_trk_1=\"W_1_1__|__1_valley_harriman\";this.sig_1w=true;}}else if(this.sw_32){if(this.sig_1w){this.route_w_trk_1=null;this.sig_1w=false;}else{if(next_block_3===Occupy||next_block_3===Lined){alert(\"Cannot Line Route Because Conflict With Next Block\");return;}this.route_w_trk_1=\"W_1_3__|__3_industrial_harriman\";this.sig_1w=true;}}else if(!this.sw_32&&this.sw_21){if(this.sig_1w){this.route_w_trk_1=null;this.sig_1w=false;}else{if(next_block_2===Occupy||next_block_2===Lined){alert(\"Cannot Line Route Because Conflict With Next Block\");return;}this.route_w_trk_1=\"W_1_2__|__2_valley_harriman\";this.sig_1w=true;}}}// ---- END click_sig_1w() ----\n/**\n     * click_sig_1e()\n     * @summary the function that is called when clicking the signal, creates a route\n     * \n     * @description When the function is called it will determine if a route can be created, \n     * and if so what the route is and sets it based off of the switch status\n     * \n     * @param next_block_1, The next block on Track #1\n     */},{key:\"click_sig_1e\",value:function click_sig_1e(next_block_1){if(this.sw_21||this.sw_32){return;}else{if(this.sig_1e){this.route_e_trk_1=null;this.sig_1e=false;}else{if(next_block_1===Occupy||next_block_1===Lined){alert(\"Cannot Line Route Because Conflict With Next Block\");return;}this.route_e_trk_1=\"E_1_1__|__1_harriman_sterling\";this.sig_1e=true;}}}// ---- END click_sig_1e() ----\n/**\n     * click_sig_2e()\n     * @summary the function that is called when clicking the signal, creates a route\n     * \n     * @description When the function is called it will determine if a route can be created, \n     * and if so what the route is and sets it based off of the switch status\n     * \n     * @param next_block_1, The next block on Track #1\n     */},{key:\"click_sig_2e\",value:function click_sig_2e(next_block_1){if(!this.sw_21){return;}else{if(this.sig_2e){this.route_e_trk_2=null;this.sig_2e=false;}else{if(next_block_1===Occupy||next_block_1===Lined){alert(\"Cannot Line Route Because Conflict With Next Block\");return;}this.route_e_trk_2=\"E_2_1__|__1_harriman_sterling\";this.sig_2e=true;}}}// ---- END click_sig_2e() ----\n/**\n     * click_sig_3e()\n     * @summary the function that is called when clicking the signal, creates a route\n     * \n     * @description When the function is called it will determine if a route can be created, \n     * and if so what the route is and sets it based off of the switch status\n     * \n     * @param next_block_1, The next block on Track #1\n     */},{key:\"click_sig_3e\",value:function click_sig_3e(next_block_1){if(!this.sw_32){return;}else{if(this.sig_3e){this.route_e_trk_3=null;this.sig_3e=false;}else{if(next_block_1===Occupy||next_block_1===Lined){alert(\"Cannot Line Route Because Conflict With Next Block\");return;}this.route_e_trk_3=\"E_3_1__|__1_harriman_sterling\";this.sig_3e=true;}}}// ---- END click_sig_3e() ----\n/**\n     * set_occupied()\n     * @summary Sets the track as occupied\n     * \n     * @param n_state, The new state of the track\n     * This was used to test, and never removed passing the state as a paramemter, which is not needed anymore\n     */},{key:\"set_occupied\",value:function set_occupied(n_state){if(n_state===true||n_state===false){this.int_occupied=n_state;this.time_occupied=new Date().getTime()/1000;}else{console.log(\"ERROR\");}}// ---- END set_occupied() ----\n/**\n     * can_clear()\n     * @summary Checks if a track could be cleared, meaning a train is no longer in the interlocking\n     * \n     * @description Check the track if a train has been in the interlocking for more then 4 seconds, if so it\n     * clears that track\n     */},{key:\"can_clear\",value:function can_clear(){// Get current time\nvar current_time=new Date().getTime()/1000;if(current_time-this.time_occupied>4&&current_time-this.time_occupied<100000){this.sig_1w=false;this.sig_1e=false;this.sig_2e=false;this.sig_3e=false;this.route_w_trk_1=null;this.route_e_trk_1=null;this.route_e_trk_2=null;this.route_e_trk_3=null;this.int_occupied=false;this.time_occupied=null;}}/**\n     * @summary Funtion to throw switch #21 in the interlocking\n     * \n     * The function sets the status of the switch, whether it is is the normal possition\n     * of reversed, (True = Reversed / False = Normal)\n     */},{key:\"throw_sw_21\",value:function throw_sw_21(){if(this.sw_21===false){this.sw_21=true;}else{this.sw_21=false;}}// ---- END throw_sw_21() ----\n/**\n     * @summary Funtion to throw switch #32 in the interlocking\n     * \n     * The function sets the status of the switch, whether it is is the normal possition\n     * of reversed, (True = Reversed / False = Normal)\n     */},{key:\"throw_sw_32\",value:function throw_sw_32(){if(this.sw_32===false){this.sw_32=true;}else{this.sw_32=false;}}// ---- END throw_sw_32() ----\n/**\n     * get_routes()\n     * @summary Gets all the routes from the interlocking\n     * \n     * @returns An Array holding every route variable from the interlocking\n     */},{key:\"get_routes\",value:function get_routes(){var routes=[this.route_w_trk_1,this.route_e_trk_1,this.route_e_trk_2,this.route_e_trk_3];return routes;}// ---- END get_routes() ----\n/**\n     * get_interlocking_status()\n     * @summary returns the status of the interlocking that would be needed by the ReactJS Components\n     * \n     * @description All the information that is returned here is what is needed by the ReactJS Component \n     * for the interlocking that is need to draw the interlocking to the screen\n     * \n     * @returns Object with the status of the interlocking\n     */},{key:\"get_interlocking_status\",value:function get_interlocking_status(){var status={sw_21:this.sw_21,sw_32:this.sw_32,occupied:this.int_occupied,routes:this.get_routes()};return status;}// ---- END get_interlocking_status() ----\n}]);return CTC_Harriman;}();// This is required when using ReactJS\nexport default CTC_Harriman;","map":{"version":3,"sources":["/Users/joey/Documents/Codes/CMPS_450/Senior_Project/src/scripts/Interlockings/Southern_Tier/ctc_harriman.js"],"names":["Empty","Lined","Occupy","CTC_Harriman","sw_21","sw_32","sig_1w","sig_1e","sig_2e","sig_3e","route_w_trk_1","route_e_trk_1","route_e_trk_2","route_e_trk_3","int_occupied","time_occupied","direction","track","next_block_1","next_block_2","next_block_3","alert","n_state","Date","getTime","console","log","current_time","routes","status","occupied","get_routes"],"mappings":"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","sourcesContent":["/**\n * @file ctc_harriman.js\n * @author Joey Damico\n * @date September 25, 2019\n * @summary CTC Controller Class for the CP Harriman Interlocking\n */\n\n// Color Constants For Drawing Routes\nconst Empty = '#999999';\nconst Lined = '#75fa4c';\nconst Occupy = '#eb3323';\n\n\n/**\n * Class is the Backend for the CP Harriman Interlocking This class is what controlls the CP Harriman Interlocking, \n * it is sort of like a backen, but is the controller, this is what makes all the train movements possible, \n * and the ReactJS Component class gets information from this class to display the correct status of \n * the interlocking on the screen\n * \n * MEMBER VARIABLES\n * @member sw_21 -> Bool if Switch #21 is Reveresed or Not\n * @member sw_32 -> Bool if Switch #32 is Reveresed or Not\n * \n * @member sig_1w -> Bool if Signal #1w is Lined or Not\n * @member sig_1e -> Bool if Signal #1e is Lined or Not\n * @member sig_2e -> Bool if Signal #2e is Lined or Not\n * @member sig_3e -> Bool if Signal #3e is Lined or Not\n * \n * @member route_w_trk_1 = The west bound route for track #1\n * @member route_e_trk_1 = The east bound route for track #1\n * @member route_e_trk_2 = The east bound route for track #2\n * @member route_e_trk_3 = The east bound route for track #3\n * \n * @member time_occupied = The time the track was occupied, used to know when to clear the route\n * @member int_occupied = Bool if the track is occupied or not\n */\nclass CTC_Harriman {\n    /**\n     * constructor()\n     * @summary The constructor for the CTC_Harriman class\n     * \n     * @description This will initialize all the member variables when the program is started\n     */\n\tconstructor() {\n        // Bools for the switches\n\t\tthis.sw_21 = false;\n\t\tthis.sw_32 = false;\n        // Bools for the signals\n\t\tthis.sig_1w = false;\n\t\tthis.sig_1e = false;\n\t\tthis.sig_2e = false;\n\t\tthis.sig_3e = false;\n        // Track routes\n\t\tthis.route_w_trk_1 = null;\n\t\tthis.route_e_trk_1 = null;\n\t\tthis.route_e_trk_2 = null;\n\t\tthis.route_e_trk_3 = null;\n        // Used for routing and occupying the tracks \n\t\tthis.int_occupied = false;\n        this.time_occupied = null;\n\t}\n    // ---- END constructor() ----\n\n    /**\n     * get_train_route()\n     * @summary Returns the route for the train at a given track\n     * \n     * @param direction, The direction the train is moving\n     * @param track, The Track number of the train \n     */\n    get_train_route(direction, track) {\n        if (direction === \"WEST\") {\n               return this.route_w_trk_1;\n        }\n        else {\n        \tif (track === \"1\") {\n            \treturn this.route_e_trk_1;\n        \t}   \n        \telse if (track === \"2\") {\n        \t\treturn this.route_e_trk_2;\n        \t}\n        \telse {\n        \t\treturn this.route_e_trk_3;\n        \t}\n        }\n    }\n    // ---- END get_train_route() ----\n\n    /**\n     * click_sig_2w()\n     * @summary the function that is called when clicking the signal, creates a route\n     * \n     * @description When the function is called it will determine if a route can be created, \n     * and if so what the route is and sets it based off of the switch status\n     * \n     * @param next_block_1, The next block on Track #1\n     * @param next_block_2, The next block on Track #2\n     * @param next_block_3, The next block on Track #3\n     */\n\tclick_sig_1w(next_block_1, next_block_2, next_block_3) {\n\t\tif (!this.sw_32 && !this.sw_21) {\n\t\t\tif (this.sig_1w) {\n\t\t\t\tthis.route_w_trk_1 = null;\n\t\t\t\tthis.sig_1w = false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (next_block_1 === Occupy || next_block_1 === Lined) {\n                    alert(\"Cannot Line Route Because Conflict With Next Block\");\n                    return;\n                }\n                this.route_w_trk_1 = \"W_1_1__|__1_valley_harriman\";\n                this.sig_1w = true;\n\t\t\t}\n\t\t}\n\t\telse if (this.sw_32) {\n\t\t\tif (this.sig_1w) {\n\t\t\t\tthis.route_w_trk_1 = null;\n\t\t\t\tthis.sig_1w = false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (next_block_3 === Occupy || next_block_3 === Lined) {\n                    alert(\"Cannot Line Route Because Conflict With Next Block\");\n                    return;\n                }\n                this.route_w_trk_1 = \"W_1_3__|__3_industrial_harriman\";\n                this.sig_1w = true;\n\t\t\t}\n\t\t}\n\t\telse if (!this.sw_32 && this.sw_21) {\n\t\t\tif (this.sig_1w) {\n\t\t\t\tthis.route_w_trk_1 = null;\n\t\t\t\tthis.sig_1w = false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (next_block_2 === Occupy || next_block_2 === Lined) {\n                    alert(\"Cannot Line Route Because Conflict With Next Block\");\n                    return;\n                }\n                this.route_w_trk_1 = \"W_1_2__|__2_valley_harriman\";\n                this.sig_1w = true;\n\t\t\t}\n\t\t}\n\t}\n    // ---- END click_sig_1w() ----\n\n    /**\n     * click_sig_1e()\n     * @summary the function that is called when clicking the signal, creates a route\n     * \n     * @description When the function is called it will determine if a route can be created, \n     * and if so what the route is and sets it based off of the switch status\n     * \n     * @param next_block_1, The next block on Track #1\n     */\n\tclick_sig_1e(next_block_1) {\n\t\tif (this.sw_21 || this.sw_32) {\n\t\t\treturn;\n\t\t}\n\t\telse {\n\t\t\tif (this.sig_1e) {\n\t\t\t\tthis.route_e_trk_1 = null;\n\t\t\t\tthis.sig_1e = false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (next_block_1 === Occupy || next_block_1 === Lined) {\n                    alert(\"Cannot Line Route Because Conflict With Next Block\");\n                    return;\n                }\n                this.route_e_trk_1 = \"E_1_1__|__1_harriman_sterling\";\n                this.sig_1e = true;\n\t\t\t}\n\t\t}\n\t}\n    // ---- END click_sig_1e() ----\n\n    /**\n     * click_sig_2e()\n     * @summary the function that is called when clicking the signal, creates a route\n     * \n     * @description When the function is called it will determine if a route can be created, \n     * and if so what the route is and sets it based off of the switch status\n     * \n     * @param next_block_1, The next block on Track #1\n     */\n\tclick_sig_2e(next_block_1) {\n\t\tif (!this.sw_21) {\n\t\t\treturn;\n\t\t}\n\t\telse {\n\t\t\tif (this.sig_2e) {\n\t\t\t\tthis.route_e_trk_2 = null;\n\t\t\t\tthis.sig_2e = false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (next_block_1 === Occupy || next_block_1 === Lined) {\n                    alert(\"Cannot Line Route Because Conflict With Next Block\");\n                    return;\n                }\n                this.route_e_trk_2 = \"E_2_1__|__1_harriman_sterling\";\n                this.sig_2e = true;\n\t\t\t}\n\t\t}\n\t}\n    // ---- END click_sig_2e() ----\n\n    /**\n     * click_sig_3e()\n     * @summary the function that is called when clicking the signal, creates a route\n     * \n     * @description When the function is called it will determine if a route can be created, \n     * and if so what the route is and sets it based off of the switch status\n     * \n     * @param next_block_1, The next block on Track #1\n     */\n\tclick_sig_3e(next_block_1) {\n\t\tif (!this.sw_32) {\n\t\t\treturn;\n\t\t}\n\t\telse {\n\t\t\tif (this.sig_3e) {\n\t\t\t\tthis.route_e_trk_3 = null;\n\t\t\t\tthis.sig_3e = false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (next_block_1 === Occupy || next_block_1 === Lined) {\n                    alert(\"Cannot Line Route Because Conflict With Next Block\");\n                    return;\n                }\n                this.route_e_trk_3 = \"E_3_1__|__1_harriman_sterling\";\n                this.sig_3e = true;\n\t\t\t}\n\t\t}\n\t}\n    // ---- END click_sig_3e() ----\n\n    /**\n     * set_occupied()\n     * @summary Sets the track as occupied\n     * \n     * @param n_state, The new state of the track\n     * This was used to test, and never removed passing the state as a paramemter, which is not needed anymore\n     */\n    set_occupied(n_state) {\n        if (n_state === true || n_state === false) {\n            this.int_occupied = n_state;\n            this.time_occupied = new Date().getTime() / 1000;\n        }\n        else {\n            console.log(\"ERROR\");\n        }\n    }\n    // ---- END set_occupied() ----\n\n    /**\n     * can_clear()\n     * @summary Checks if a track could be cleared, meaning a train is no longer in the interlocking\n     * \n     * @description Check the track if a train has been in the interlocking for more then 4 seconds, if so it\n     * clears that track\n     */\n    can_clear() {\n        // Get current time\n        let current_time = new Date().getTime() / 1000;\n\n        if (current_time - this.time_occupied > 4 && current_time - this.time_occupied < 100000) {\n            this.sig_1w = false;\n\t\t\tthis.sig_1e = false;\n\t\t\tthis.sig_2e = false;\n\t\t\tthis.sig_3e = false;\n\n\t\t\tthis.route_w_trk_1 = null;\n\t\t\tthis.route_e_trk_1 = null;\n\t\t\tthis.route_e_trk_2 = null;\n\t\t\tthis.route_e_trk_3 = null;\n\n\t\t\tthis.int_occupied = false;\n\t\t\tthis.time_occupied = null;\n        }\n    }\n\n\t/**\n     * @summary Funtion to throw switch #21 in the interlocking\n     * \n     * The function sets the status of the switch, whether it is is the normal possition\n     * of reversed, (True = Reversed / False = Normal)\n     */\n    throw_sw_21() {\n        if (this.sw_21 === false) {\n            this.sw_21 = true;\n        }\n        else {\n            this.sw_21 = false;\n        }\n    }\n    // ---- END throw_sw_21() ----\n\n    /**\n     * @summary Funtion to throw switch #32 in the interlocking\n     * \n     * The function sets the status of the switch, whether it is is the normal possition\n     * of reversed, (True = Reversed / False = Normal)\n     */\n    throw_sw_32() {\n        if (this.sw_32 === false) {\n            this.sw_32 = true;\n        }\n        else {\n            this.sw_32 = false;\n        }\n    }\n    // ---- END throw_sw_32() ----\n    \n    /**\n     * get_routes()\n     * @summary Gets all the routes from the interlocking\n     * \n     * @returns An Array holding every route variable from the interlocking\n     */\n    get_routes() {\n        let routes = [\n            this.route_w_trk_1,\n            this.route_e_trk_1, this.route_e_trk_2, this.route_e_trk_3\n        ];\n\n        return routes;\n    }\n    // ---- END get_routes() ----\n\n    /**\n     * get_interlocking_status()\n     * @summary returns the status of the interlocking that would be needed by the ReactJS Components\n     * \n     * @description All the information that is returned here is what is needed by the ReactJS Component \n     * for the interlocking that is need to draw the interlocking to the screen\n     * \n     * @returns Object with the status of the interlocking\n     */\n    get_interlocking_status() {\n        let status = {\n            sw_21: this.sw_21,\n\t\t\tsw_32: this.sw_32,\n\t\t\toccupied: this.int_occupied,\n\t\t\troutes: this.get_routes()\n        }\n\n        return status;\n    }\n    // ---- END get_interlocking_status() ----\n}\n\n// This is required when using ReactJS\nexport default CTC_Harriman;"]},"metadata":{},"sourceType":"module"}